<a (click)="toggleCtrls()">
  <ng-container *ngIf="!ctrlsOpen"> configure &gt;&gt;</ng-container>
  <ng-container *ngIf="ctrlsOpen"> close &lt;&lt;</ng-container>
</a>

<div *ngIf="ctrlsOpen" class="am4-ctrls">
  <div class="sub-group">
    <h4>Radius (%)</h4>
    <label
      ><input
        type="number"
        [(ngModel)]="chartRadius"
        (change)="applySettings()"
      />Chart</label
    >
    <label [ngClass]="{ disabled: showTotals }"
      ><input
        type="number"
        [(ngModel)]="chartRadiusInner"
        (change)="applySettings()"
      />Inner</label
    >
    <label
      ><input
        type="number"
        [(ngModel)]="labelsRadius"
        (change)="applySettings(true)"
      />Labels</label
    >
  </div>

  <div class="sub-group">
    <h4>Max Widths (px)</h4>
    <label
      ><input
        type="number"
        [(ngModel)]="maxLabelWidth"
        (change)="applySettings()"
      />Labels</label
    >
    <label
      ><input
        type="number"
        [(ngModel)]="maxTooltiptWidth"
        (change)="applySettings()"
      />Tooltips</label
    >
  </div>

  <div class="sub-group">
    <h4>Labels</h4>
    <label [ngClass]="{ disabled: bendLabels || rotateLabels }"
      ><input
        type="checkbox"
        [(ngModel)]="alignLabels"
        (change)="applySettings(true)"
      />Align</label
    >
    <label
      ><input
        type="checkbox"
        [(ngModel)]="labelTruncate"
        (change)="applySettings(true)"
      />Truncate</label
    >
    <label [ngClass]="{ disabled: labelTruncate }"
      ><input
        type="checkbox"
        [(ngModel)]="labelWrap"
        (change)="applySettings(true)"
      />Wrap</label
    >
    <label [ngClass]="{ disabled: alignLabels || rotateLabels }">
      <input
        type="checkbox"
        [(ngModel)]="bendLabels"
        (change)="applySettings(true)"
      />Bend</label
    >
    <label [ngClass]="{ disabled: bendLabels || alignLabels }"
      ><input
        type="checkbox"
        [(ngModel)]="rotateLabels"
        (change)="applySettings(true)"
      />Rotate</label
    >
  </div>

  <div class="sub-group">
    <h4>Tooltips</h4>
    <label
      ><input
        type="checkbox"
        [(ngModel)]="tooltipTruncate"
        (change)="applySettings()"
      />Truncate</label
    >
    <label [ngClass]="{ disabled: tooltipTruncate }">
      <input
        type="checkbox"
        [(ngModel)]="tooltipWrap"
        (change)="applySettings()"
      />Wrap</label
    >
  </div>

  <div class="sub-group">
    <h4>Grouping</h4>
    <label
      ><input
        type="checkbox"
        [(ngModel)]="groupOther"
        (change)="applySettings(true)"
      />Group</label
    >

    <label [ngClass]="{ disabled: !groupOther }"
      ><input
        type="checkbox"
        [(ngModel)]="useThreshold"
        (change)="applySettings(true)"
      />Use Threshold</label
    >
    <label [ngClass]="{ disabled: !useThreshold }"
      ><input
        type="number"
        [(ngModel)]="groupThreshold"
        (change)="applySettings(true)"
        max="100"
        min="0.1"
        step="0.1"
      />Threshold</label
    >
    <label [ngClass]="{ disabled: useThreshold }"
      ><input
        type="number"
        [(ngModel)]="groupLimit"
        (change)="applySettings(true)"
        min="2"
      />Limit</label
    >
  </div>

  <div class="sub-group">
    <h4>Legend (interactive)</h4>
    <label
      ><input
        type="checkbox"
        [(ngModel)]="chartLegend"
        (change)="applySettings(true)"
      />Show</label
    >
    <label [ngClass]="{ disabled: !chartLegend }"
      ><input
        type="checkbox"
        [(ngModel)]="legendExternal"
        (change)="applySettings(true)"
      />External</label
    >
    <label [ngClass]="{ disabled: !chartLegend || legendExternal }">
      Position
      <select [(ngModel)]="legendPosition" (change)="applySettings()">
        <option value=""></option>
        <option value="bottom">bottom</option>
        <option value="left">left</option>
        <option value="top">top</option>
        <option value="right">right</option>
      </select></label
    >
  </div>

  <div class="sub-group">
    <h4>Misc</h4>
    <label
      ><input
        type="checkbox"
        [(ngModel)]="showTotals"
        (change)="applySettings(true)"
      />Totals</label
    >

    <label [ngClass]="{ disabled: groupOther }"
      ><input
        type="number"
        (change)="applySettings(true)"
        [(ngModel)]="labelCutoffPercent"
        ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/"
        max="100"
        min="0"
        step="0.01"
      />Label cut-off (%)</label
    >

    <label [ngClass]="{ disabled: is3D }"
      ><input
        type="checkbox"
        [(ngModel)]="isRadial"
        (change)="applySettings(true)"
      />Radial</label
    >
    <label [ngClass]="{ disabled: isRadial }"
      ><input
        type="checkbox"
        [(ngModel)]="is3D"
        (change)="applySettings(true)"
      />3D</label
    >
    <label
      ><input
        type="checkbox"
        [(ngModel)]="showExports"
        (change)="applySettings(true)"
      />Exports</label
    >
  </div>
</div>
<div id="pie"></div>
<div
  id="legend"
  [ngClass]="{ offscreen: !(chartLegend && legendExternal) }"
></div>
